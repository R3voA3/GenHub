<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:GenHub.Common.ViewModels.Dialogs"
        xmlns:md="https://github.com/whistyun/Markdown.Avalonia"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="400"
        x:Class="GenHub.Common.Views.Dialogs.UpdateOptionDialogWindow"
        x:DataType="vm:UpdateOptionDialogViewModel"
        Width="500" SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        SystemDecorations="None"
        TransparencyLevelHint="AcrylicBlur"
        Background="Transparent"
        ExtendClientAreaToDecorationsHint="True">

    <Border CornerRadius="8" ClipToBounds="True">
        <Border.Background>
            <!-- Semi-transparent dark navy for blur to show through -->
            <SolidColorBrush Color="#CC050515" />
        </Border.Background>

        <Panel>
             <!-- Accent Border -->
             <Border BorderBrush="#40673AB7" BorderThickness="1" CornerRadius="8" IsHitTestVisible="False" />

             <!-- Top Gradient Glow -->
             <Border Height="200" VerticalAlignment="Top" IsHitTestVisible="False" Opacity="0.3">
                <Border.Background>
                    <LinearGradientBrush StartPoint="50%,0%" EndPoint="50%,100%">
                        <GradientStop Color="#40673AB7" Offset="0" />
                        <GradientStop Color="Transparent" Offset="1" />
                    </LinearGradientBrush>
                </Border.Background>
             </Border>

             <Grid RowDefinitions="Auto,*,Auto" Margin="32">

                <!-- Header -->
                <TextBlock Grid.Row="0" Text="{Binding Title}"
                           FontSize="22" FontWeight="SemiBold"
                           Foreground="White" Margin="0,0,0,24" />

                <!-- Content -->
                <StackPanel Grid.Row="1" Spacing="20">
                    <md:MarkdownScrollViewer Markdown="{Binding Message}">
                        <md:MarkdownScrollViewer.Styles>
                            <Style Selector="TextBlock">
                                <Setter Property="Foreground" Value="#E0E0E0"/>
                                <Setter Property="FontSize" Value="15"/>
                                <Setter Property="LineHeight" Value="22"/>
                                <Setter Property="TextWrapping" Value="Wrap"/>
                            </Style>
                        </md:MarkdownScrollViewer.Styles>
                    </md:MarkdownScrollViewer>

                    <!-- Options Group -->
                    <Border Background="#20FFFFFF" CornerRadius="6" Padding="16" Margin="0,8,0,0">
                        <StackPanel Spacing="12">
                            <RadioButton IsChecked="{Binding IsReplaceCurrentVersion}"
                                         Content="Replace (Update current version)"
                                         Foreground="White" FontWeight="Medium"/>

                            <TextBlock Text="Updates the current version in existing profiles. This will replace the files in your current installation."
                                       FontSize="12" Foreground="#A0A0A0" Margin="28,-8,0,4"
                                       TextWrapping="Wrap"/>

                            <RadioButton IsChecked="{Binding IsCreateNewProfile}"
                                         Content="Create New Profile"
                                         Foreground="White" FontWeight="Medium"/>

                            <TextBlock Text="Creates a new companion profile for the new version, keeping your current version and profile intact."
                                       FontSize="12" Foreground="#A0A0A0" Margin="28,-8,0,0"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Footer -->
                <Grid Grid.Row="2" ColumnDefinitions="Auto,*" Margin="0,32,0,0">
                    <CheckBox Grid.Column="0"
                              IsChecked="{Binding IsDoNotAskAgain}"
                              Content="Don't ask again"
                              Foreground="#C0C0C0" VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="16">
                        <Button Command="{Binding SkipCommand}" Content="Skip"
                                Background="Transparent" BorderBrush="#40FFFFFF" BorderThickness="1"
                                Foreground="White" Padding="20,10" CornerRadius="4"
                                ToolTip.Tip="Skip this update (you'll be notified again for newer versions)"/>

                        <Button Command="{Binding UpdateCommand}" Content="Update"
                                FontWeight="SemiBold" Foreground="White" Padding="24,10" CornerRadius="4">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Color="#4527A0" Offset="0" />
                                    <GradientStop Color="#7C4DFF" Offset="1" />
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>
                    </StackPanel>
                </Grid>
             </Grid>
        </Panel>
    </Border>
</Window>
